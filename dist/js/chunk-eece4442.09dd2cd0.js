(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eece4442"],{2579:function(e,t,s){},"319f":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"asset-types page fixed-page"},[s("list-page-header",{attrs:{title:e.$t("asset_types.title"),"new-entry-label":e.$t("asset_types.new_asset_type")},on:{"new-clicked":e.onNewClicked}}),s("asset-type-list",{staticClass:"mt2",attrs:{entries:e.assetTypes,"is-loading":e.loading.list,"is-error":e.errors.list},on:{"edit-clicked":e.onEditClicked,"delete-clicked":e.onDeleteClicked}}),s("edit-asset-type-modal",{attrs:{active:e.modals.edit,"is-loading":e.loading.edit,"is-error":e.errors.edit,"asset-type-to-edit":e.assetTypeToEdit},on:{cancel:function(t){e.modals.edit=!1},confirm:e.confirmEditAssetType}}),s("delete-modal",{attrs:{active:e.modals.del,"is-loading":e.loading.del,"is-error":e.errors.del,text:e.deleteText,"error-text":e.$t("asset_types.delete_error")},on:{cancel:function(t){e.modals.del=!1},confirm:e.confirmDeleteAssetType}})],1)},n=[],a=s("2f62"),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list"},[s("div",{staticClass:"datatable-wrapper"},[s("table",{staticClass:"datatable"},[s("thead",{staticClass:"datatable-head"},[s("tr",[s("th",{staticClass:"name",attrs:{scope:"col"}},[e._v(e._s(e.$t("asset_types.fields.name")))]),s("th",{staticClass:"task-types",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("asset_types.fields.task_types"))+" ")]),s("th",{staticClass:"actions",attrs:{scope:"col"}})])]),e.entries.length>0?s("tbody",{staticClass:"datatable-body"},e._l(e.entries,(function(t){return s("tr",{key:t.id,staticClass:"datatable-row"},[s("td",{staticClass:"name"},[e._v(" "+e._s(t.name)+" ")]),(t.task_types||[]).length>0?s("td",{staticClass:"task-types"},e._l(e.sortTaskTypes(t.task_types),(function(t){return s("span",{key:t.id,staticClass:"task-type-name flexrow-item"},[t.id?s("task-type-name",{attrs:{"task-type":t}}):e._e()],1)})),0):s("td",{staticClass:"task-types"},[e._v(" "+e._s(e.$t("asset_types.include_all"))+" ")]),s("row-actions-cell",{attrs:{"entry-id":t.id},on:{"edit-clicked":function(s){return e.$emit("edit-clicked",t)},"delete-clicked":function(s){return e.$emit("delete-clicked",t)}}})],1)})),0):e._e()])]),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),s("p",{staticClass:"has-text-centered nb-asset-types"},[e._v(" "+e._s(e.entries.length)+" "+e._s(e.$tc("asset_types.number",e.entries.length))+" ")])],1)},o=[],c=s("2229"),l=s("14b2"),p=s("e60b"),d=s("274f");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){y(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function y(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var m={name:"asset-type-list",props:["entries","isLoading","isError"],data:function(){return{}},components:{TaskTypeName:d["a"],RowActionsCell:l["a"],TableInfo:p["a"]},computed:f({},Object(a["c"])(["taskTypeMap"])),methods:f(f({},Object(a["b"])([])),{},{sortTaskTypes:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=t.map((function(t){return e.taskTypeMap.get(t)}));return Object(c["o"])(s)}})},b=m,h=(s("6fa2"),s("2877")),T=Object(h["a"])(b,i,o,!1,null,"9b9c3862",null),O=T.exports,v=s("5f48"),g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[e.assetTypeToEdit&&e.assetTypeToEdit.id?s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("asset_types.edit_title"))+" "+e._s(e.assetTypeToEdit.name)+" ")]):s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("asset_types.new_asset_type"))+" ")]),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("asset_types.fields.name"),maxlength:30},on:{enter:e.runConfirmation},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),s("label",{staticClass:"label"},[e._v(" "+e._s(e.$t("asset_types.fields.task_types"))+" ")]),s("div",{staticClass:"flexrow task-types mb1"},[e._l(e.form.task_types,(function(t){return s("div",{key:t,staticClass:"flexrow-item mb1",on:{click:function(s){return e.removeTaskType(t)}}},[t?s("task-type-name",{attrs:{"task-type":e.taskTypeMap.get(t),deletable:!0}}):e._e()],1)})),e.availableTaskTypes.length>1?s("combobox",{staticClass:"flexrow-item mb1",attrs:{options:e.availableTaskTypes,"with-margin":!1},on:{input:function(t){e.taskTypeMap.get(t)&&e.form.task_types.push(t)}}}):e._e()],2)],1),s("modal-footer",{attrs:{"error-text":e.$t("asset_types.create_error"),"is-error":e.isError,"is-loading":e.isLoading},on:{confirm:e.runConfirmation,cancel:function(t){return e.$emit("cancel")}}})],1)])])},k=[],_=s("d065"),j=s("992f"),w=s("d5c9"),C=s("7bf8");function E(e){return D(e)||$(e)||x(e)||P()}function P(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x(e,t){if(e){if("string"===typeof e)return A(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?A(e,t):void 0}}function $(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function D(e){if(Array.isArray(e))return A(e)}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}function S(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function M(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?S(Object(s),!0).forEach((function(t){L(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):S(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function L(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var I={name:"edit-asset-type-modal",mixins:[_["a"]],components:{Combobox:j["a"],TaskTypeName:d["a"],ModalFooter:w["a"],TextField:C["a"]},props:["onConfirmClicked","text","active","cancelRoute","isLoading","isError","assetTypeToEdit"],data:function(){return{form:{name:"",task_types:[]}}},computed:M(M({},Object(a["c"])(["taskTypes","taskTypeMap","assetTypes","assetTypeStatusOptions"])),{},{availableTaskTypes:function(){var e=this,t=Object(c["d"])(this.taskTypes.filter((function(t){return-1===e.form.task_types.indexOf(t.id)&&"Asset"===t.for_entity})));return[{name:"+ Task Type",id:"-"}].concat(E(t)).map((function(e){return{label:e.name,value:e.id}}))}}),methods:M(M({},Object(a["b"])(["loadTaskTypes"])),{},{removeTaskType:function(e){var t=this.form.task_types.indexOf(e);t>=0&&this.form.task_types.splice(t,1)},runConfirmation:function(){this.$emit("confirm",this.form)}}),watch:{active:function(){var e=this;this.active&&setTimeout((function(){e.$refs.nameField.focus()}),100)},assetTypeToEdit:function(){if(this.assetTypeToEdit.id){var e=this.assetTypeToEdit.task_types||[];this.form={name:this.assetTypeToEdit.name,task_types:E(e)}}else this.form={name:"",task_types:this.taskTypes.filter((function(e){return"Asset"===e.for_entity})).map((function(e){return e.id}))}}}},N=I,F=(s("81e2"),Object(h["a"])(N,g,k,!1,null,"c9cfa522",null)),J=F.exports,R=s("459c");function B(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function H(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?B(Object(s),!0).forEach((function(t){K(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):B(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function K(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var U={name:"asset-types",components:{AssetTypeList:O,DeleteModal:v["a"],EditAssetTypeModal:J,ListPageHeader:R["a"]},data:function(){return{assetTypeToDelete:null,assetTypeToEdit:{},choices:[],errors:{del:!1,edit:!1,list:!1},modals:{del:!1,edit:!1},loading:{del:!1,edit:!1,list:!1}}},computed:H(H({},Object(a["c"])(["assetTypes","getAssetType"])),{},{deleteText:function(){var e=this.assetTypeToDelete;return e?this.$t("asset_types.delete_text",{name:e.name}):""}}),methods:H(H({},Object(a["b"])(["deleteAssetType","editAssetType","newAssetType","loadAssetTypes"])),{},{confirmEditAssetType:function(e){var t=this,s="newAssetType";this.assetTypeToEdit&&this.assetTypeToEdit.id&&(s="editAssetType",e.id=this.assetTypeToEdit.id),this.loading.edit=!0,this.errors.edit=!1,this[s](e).then((function(){t.loading.edit=!1,t.modals.edit=!1})).catch((function(e){console.error(e),t.loading.edit=!1,t.errors.edit=!0}))},confirmDeleteAssetType:function(){var e=this;this.loading.del=!0,this.errors.del=!1,this.deleteAssetType(this.assetTypeToDelete).then((function(){e.loading.del=!1,e.modals.del=!1})).catch((function(t){console.error(t),e.errors.del=!0,e.loading.del=!1}))},onNewClicked:function(){this.assetTypeToEdit={},this.errors.edit=!1,this.modals.edit=!0},onEditClicked:function(e){this.assetTypeToEdit=e,this.errors.edit=!1,this.modals.edit=!0},onDeleteClicked:function(e){this.assetTypeToDelete=e,this.errors.del=!1,this.modals.del=!0}}),watch:{},metaInfo:function(){return{title:"".concat(this.$t("asset_types.title")," - Kitsu")}}},q=U,z=Object(h["a"])(q,r,n,!1,null,"c5daabc0",null);t["default"]=z.exports},"39b0":function(e,t,s){},"459c":function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"level page-header"},[s("div",{staticClass:"level-left"},[s("page-title",{attrs:{text:e.title}})],1),s("div",{staticClass:"level-right"},[s("button-simple",{staticClass:"level-item",attrs:{icon:"plus",text:e.newEntryLabel},on:{click:function(t){return e.$emit("new-clicked")}}})],1)])},n=[],a=s("2f62"),i=s("de40"),o=s("8d07");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){p(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var d={name:"list-page-header",components:{ButtonSimple:i["a"],PageTitle:o["a"]},props:{title:{type:String,default:""},newEntryLabel:{type:String,default:""}},computed:l({},Object(a["c"])([])),methods:l({},Object(a["b"])([])),watch:{}},u=d,f=s("2877"),y=Object(f["a"])(u,r,n,!1,null,"bf4864ae",null);t["a"]=y.exports},"6fa2":function(e,t,s){"use strict";s("39b0")},"81e2":function(e,t,s){"use strict";s("2579")}}]);
//# sourceMappingURL=chunk-eece4442.09dd2cd0.js.map